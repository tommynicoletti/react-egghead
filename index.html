<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>EggHead React</title>
</head>

<body>
	<div id="root"></div>
	<script src="https://unpkg.com/react@16/umd/react.development.js"></script>
	<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
	<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
	<script type="text/babel">
	class StopWatch extends React.Component{
		state = {lapse:0,running:false};
		handleRunClick = () => {
			this.setState( state => {
				if(state.running){
					clearInterval(this.timer)
				} else {
					const startTime = Date.now() - this.state.lapse;
					this.timer = setInterval(()=>{
						this.setState({lapse: Date.now()-startTime})
					})
				}
				return {running: !state.running};
			})
		}
		handleClearClick = () => {
			clearInterval(this.timer)
			this.setState({lapse:0,running:false});
		}
		render(){
			const {lapse,running} = this.state;
			return (
				<div>
					<p><label>{lapse} ms</label></p>
					<p><button onClick={this.handleRunClick}>{running ? 'Stop' : 'Start'}</button></p>
					<p><button onClick={this.handleClearClick}>Clear</button></p>
				</div>
			)
		}
	}
	const element = <StopWatch />
	ReactDOM.render(element, document.getElementById('root'));
	</script>
</body>

</html>
